# FairScheduler

A high-performance, automatic shift scheduler using a Genetic Algorithm, written in C.
<br>
유전자 알고리즘을 이용한 자동 교대근무 스케줄러

---

## 📖 소개 (Introduction)

수동으로 교대근무표를 작성하는 것은 많은 시간을 소모하며, 모든 근무자에게 공정함을 보장하기 어렵습니다. `FairScheduler`는 복잡한 근무 조건과 제약 사항을 만족시키면서 장기적인 공정성까지 고려하여 최적의 근무표를 자동으로 생성하는 것을 목표로 하는 C 기반의 프로젝트입니다.

---

## ✨ 주요 기능 (Features)

- **유전자 알고리즘 기반 최적화 엔진:** 다수의 제약 조건 속에서 최적의 해를 탐색합니다.
- **계층적 적합도 함수:** 필수 규칙을 우선 만족시키고, 그 안에서 공정성 점수를 최대화하는 다중 목표 최적화를 수행합니다.
- **장기적 공정성 보장:** 과거 근무 기록(누적 데이터)을 다음 달 스케줄링에 반영하여 불공정을 보정합니다.
- **성능 최적화:** 멀티스레딩을 활용하여 적합도 평가 연산을 병렬 처리하고, 실행 환경의 CPU 코어 수를 동적으로 감지하여 자원을 최대한 활용합니다.
- **크로스플랫폼 지원:** CMake 빌드 시스템을 도입하여 macOS, Windows, Linux 환경을 모두 지원합니다.

---

## 🛠️ 기술 스택 (Tech Stack)

- **Language:** C (C11 Standard)
- **Build System:** CMake
- **Threading:** Pthreads (POSIX Threads)

---

## 🚀 설치 및 실행 방법 (Installation & Usage)

*(추후 업데이트 예정)*

```bash
# 1. 저장소 복제
git clone [https://github.com/사용자이름/FairScheduler.git](https://github.com/사용자이름/FairScheduler.git)
cd FairScheduler

# 2. 빌드
mkdir build && cd build
cmake ..
make

# 3. 실행
./FairScheduler ../path/to/employees.csv ../path/to/request.csv



작동

1. 유전자 정보 = 근무자 수 * 해당 월의 말일

2. 이 정보를 근무자 수 * 100(임시) 수 만큼 초기값 생성

3. 근무표 조건에 따른 평가식으로 각 유전자별 점수 산정
  3.1 근무표 조건은 임시로 4명의 근무자를 가정하고 한다.
  3.2 모든 날짜, 모든 시간에 근무자는 1명 이상이 존재해야 한다.
  3.3 N(Night)근무 이후에는 반드시 휴무(Off)를 1일 이상 2일 이하 가져야 한다.

4. 적합도 평가식의 설명
  4.1 평가식은 차감식 점수 산정으로 한다. 초기점수는 
  4.2 날짜에 근무자가 부족한 시간 * 500 만큼 차감한다. 단 O는 없어도 된다. 
    예(D N O O > E 한번 부족 > -500)(D D D D > E, N 2번부족 > -1000)
  4.3 근무자의 근무일수보다 부족할 시 -(부족한 날짜 * 50)
  4.4 근무자의 근무일수보다 초과할 시 -(초과한 날짜 * 100)
  4.5 N근무 이후, 다음날 Off가 아닐경우 -1000
  4.6 근무 유형 비율에 따른 패널티
  4.6.1 각 근무자별로 D, E, N의 근무 횟수를 집계하여 모든 근무자의 D, E, N 근무횟수가 비슷할 수록 점수를 +, 차이가 클 수록 -점수를 부과. 예) -(표준편차 * 20)

5. 엘리트와 교배
  5.1 모든 개체의 평가식 결과를 내림차순으로 정렬한다.
  5.2 엘리트는 전체 개체의 수 에서 상위 5~10%만큼 선정한다.
  5.3 엘리트는 전체 돌연변이나 교배 없이 그대로 다음세대에 전달한다.
  5.4 현재세대 전체에서 m개의 표본을 무작위로 뽑아 그중 가장 적합도 점수가 높은 것을 선정.
  5.4.1 이것을 두번 진행하여 교배 및 돌연변이 확률 적용하여 다음세대로 전달.
  5.5. 교배로 생성되는 모든 개체에 60%확률로 돌연변이 적용.
  5.5.1 돌연변이에 적용이 될 경우, 모든 유전자에 0.5~1%확률로 돌연변이 적용.
  5.6 유전적 다양성 보장을 위해 선정된 다음세대의 모든 개체와 비교하여 동일한 개체가 있을 경우, 이것을 폐기하고 5.4로 돌아간다.
  5.7 5.6은 적용 ON, OFF가능하도록하여 추후에 적용할지 여부를 테스트를 통해 결정한다.